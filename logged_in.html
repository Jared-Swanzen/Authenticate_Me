<html>
    <body>
        Logged In!
        <form action="https://github.com/login/oauth/access_token" method="post">
            <input hidden type="text" name="client_id" value="8a2dea0bd79c1721b453">
            <input hidden type="text" name="client_secret" value="335b4ada62e23ef9b7916964fd9d1e55712085f8">
            <input hidden type="text" name="code" id="code">
            <button type="submit">
                Get an access token!
            </button>
        </form>
        <button onclick="getToken()"></button>
        <p id="access_token"></p>
    </body>

    <script async>


        const urlParams = new URLSearchParams(window.location.search);  
        function getToken() {
            fetch(
                "https://github.com/login/oauth/access_token", {
                    method: "POST",
                    headers: {
                        'Accept': 'application/json'},
                    body: JSON.stringify({
                        "client_id": "8a2dea0bd79c1721b453",
                        "client_secret": "335b4ada62e23ef9b7916964fd9d1e55712085f8",
                        "code": urlParams.get("code")
                    })
                }
            ).then(re => re.json()).then(
                response => {
                    const access_token = response.get("access_token")
                    const accessTokenElem = document.getElementById('access_token');
                    accessTokenElem.innerHTML = "Access Token is: " + access_token;
                }
                
            )
        }
        const codeElem = document.getElementById("code");
        code.value = urlParams.get("code");
        console.log(urlParams.get("code"))

        // const Http = new XMLHttpRequest();
        // const url='https://github.com/login/oauth/access_token';
        // Http.open("POST", url);
        // Http.setRequestHeader('client_id', '8a2dea0bd79c1721b453');
        // Http.setRequestHeader('client_secret', '335b4ada62e23ef9b7916964fd9d1e55712085f8');
        // Http.setRequestHeader('code', urlParams.get('code'));
        // Http.send();

        // Http.onreadystatechange = (e) => {
        //     alert(Http.responseText)
        // }
    </script>
</html>